<div class="container my-5">
  <h2 class="mb-4">Battle Arena</h2>

  <form id="battleForm" class="row gy-2 gx-3 align-items-center">
    <div class="col-md-6">
      <label for="deckSelect" class="form-label">Pick a deck:</label>
      <select id="deckSelect" class="form-select" required>
        {{#each decks}}
          <option value="{{this.deck_id}}">{{this.name}}</option>
        {{/each}}
      </select>
    </div>

    <div class="col-auto">
      <button
        type="button"
        id="playBot"
        class="btn btn-primary"
      >Play Bot</button>
      <button
        type="button"
        id="playHuman"
        class="btn btn-secondary"
        onclick="window.location='/battle/lobby'"
      >Play Human</button>
    </div>
  </form>
</div>

<script>
const deckSelect = document.getElementById("deckSelect");

  // Store the chosen deck locally so the lobby page can read it.
  function saveDeckId(id) { localStorage.setItem("selectedDeckId", id); }

  document.getElementById("playHuman").onclick = () => {
    const deckId = deckSelect.value;
    saveDeckId(deckId);
    fetch("/battle/selectDeck", {
      method: "POST",
      headers: { "Content-Type": "application/json" },
      body: JSON.stringify({ deckId })
    }).then(() => (window.location = "/battle/lobby"));
  };
  document.getElementById("playBot").onclick = () => {
    const deckId = document.getElementById("deckSelect").value;
    window.location = `/battle/play/${deckId}`;       // go to animated screen
  };

</script>